<br>
<br>
<br>

# Sá»­ dá»¥ng cáº£m biáº¿n nhiá»‡t Ä‘á»™ DS18B20 vá»›i Zerobase 2

![ds18b20-circuit](https://cdn.chipstack.vn/zerobase2/ds18b20/ds18b20-circuit.jpg)

## Tá»•ng quan

BÃ i viáº¿t nÃ y sáº½ hÆ°á»›ng dáº«n báº¡n cÃ¡ch sá»­ dá»¥ng cáº£m biáº¿n nhiá»‡t Ä‘á»™ DS18B20 vá»›i Zerobase 2. Cáº£m biáº¿n DS18B20 lÃ  má»™t cáº£m biáº¿n nhiá»‡t Ä‘á»™ ká»¹ thuáº­t sá»‘ cÃ³ Ä‘á»™ chÃ­nh xÃ¡c cao vÃ  dá»… sá»­ dá»¥ng. NÃ³ cÃ³ thá»ƒ Ä‘o nhiá»‡t Ä‘á»™ tá»« -55Â°C Ä‘áº¿n +125Â°C vá»›i Ä‘á»™ phÃ¢n giáº£i 9 Ä‘áº¿n 12 bit.
Cáº£m biáº¿n nÃ y sá»­ dá»¥ng giao thá»©c 1-wire, cho phÃ©p nhiá»u cáº£m biáº¿n Ä‘Æ°á»£c káº¿t ná»‘i vá»›i cÃ¹ng má»™t dÃ¢y dá»¯ liá»‡u. Trong bÃ i viáº¿t nÃ y, chÃºng ta sáº½ sá»­ dá»¥ng thÆ° viá»‡n OneWire vÃ  DallasTemperature Ä‘á»ƒ giao tiáº¿p vá»›i cáº£m biáº¿n DS18B20.

## Chuáº©n bá»‹

| Linh kiá»‡n | Link mua |
| --- | --- |
| Board Zerobase 2|[Mua ngay](https://chipstack.vn/san-pham/zerobase-2/) |
| LCD Character 1602A ná»n xanh dÆ°Æ¡ng | [Mua ngay](https://chipstack.vn/san-pham/lcd-character-1602a-nen-xanh-duong/) |
| Module I2C LCD 1602 | [Mua ngay](https://chipstack.vn/san-pham/module-chuyen-doi-i2c-cho-lcd/) |
| DÃ¢y jumper Äá»±c â€“ Äá»±c | [Mua ngay](https://chipstack.vn/san-pham/day-jumper-duc-duc/) |
| DÃ¢y USB Type C |[Mua ngay](https://chipstack.vn/san-pham/day-usb-type-c-1m/) |
| Breadboard |[Mua ngay](https://chipstack.vn/san-pham/breadboard-830-lo/) |
| Cáº£m biáº¿n nhiá»‡t Ä‘á»™ DS18B20 | [Mua ngay](https://chipstack.vn/san-pham/cam-bien-nhiet-do-ds18b20/) |
| Äiá»‡n trá»Ÿ 4.7k | [Mua ngay](https://chipstack.vn/san-pham/dien-tro-1-4w-1/) |

<div align="center">
    <img src="https://cdn.chipstack.vn/default/zerobase2-overview.png" alt="zerobase2">
    <p><em>Board Zerobase 2</em></p>
</div>

<div align="center">
    <img src="https://cdn.chipstack.vn/zerobase/lcd-module/lcd-i2c.png" alt="lcd-i2c">
    <p><em>LCD Character 1602A ná»n xanh dÆ°Æ¡ng</em></p>
</div>

<div align="center">
    <img src="https://cdn.chipstack.vn/zerobase/lcd-module/module-i2c.png" alt="module-i2c">
    <p><em>Module I2C LCD 1602</em></p>
</div>

<div align="center">
    <img src="https://cdn.chipstack.vn/default/breadboard.png" alt="breadboard">
    <p><em>Breadboard</em></p>
</div>

<div align="center">
    <img src="https://cdn.chipstack.vn/default/jumper-wire.png" alt="jumper-wire">
    <p><em>DÃ¢y ná»‘i</em></p>
</div>

<div align="center">
    <img src="https://cdn.chipstack.vn/default/usb-type-c.jpg" alt="button-lcd-usb-type-c">
    <p><em>DÃ¢y USB Type C</em></p>
</div>

<div align="center">
    <img src="https://cdn.chipstack.vn/zerobase2/ds18b20/ds18b20.png" alt="ds18b20">
    <p><em>Cáº£m biáº¿n nhiá»‡t Ä‘á»™ DS18B20</em></p>
</div>

<div align="center">
    <img src="https://cdn.chipstack.vn/default/dien-tro-4-7k-ohm.png" alt="dien-tro-330-ohm">
    <p><em>Äiá»‡n trá»Ÿ 4.7k</em></p>
</div>

## NguyÃªn lÃ½ hoáº¡t Ä‘á»™ng

?> Cáº£m biáº¿n DS18B20 sá»­ dá»¥ng giao thá»©c 1-wire, cho phÃ©p nhiá»u cáº£m biáº¿n Ä‘Æ°á»£c káº¿t ná»‘i vá»›i cÃ¹ng má»™t dÃ¢y dá»¯ liá»‡u.

?> BÃ i viáº¿t nÃ y sáº½ sá»­ dá»¥ng thÆ° viá»‡n OneWire vÃ  DallasTemperature Ä‘á»ƒ giao tiáº¿p vá»›i cáº£m biáº¿n DS18B20. ThÆ° viá»‡n OneWire cung cáº¥p cÃ¡c hÃ m Ä‘á»ƒ giao tiáº¿p vá»›i cáº£m biáº¿n qua giao thá»©c 1-wire, trong khi thÆ° viá»‡n DallasTemperature cung cáº¥p cÃ¡c hÃ m Ä‘á»ƒ Ä‘á»c nhiá»‡t Ä‘á»™ tá»« cáº£m biáº¿n.

?> Sau Ä‘Ã³ nhiá»‡t Ä‘á»™ sáº½ Ä‘Æ°á»£c hiá»ƒn thá»‹ lÃªn LCD 1602A thÃ´ng qua giao thá»©c I2C.

## SÆ¡ Ä‘á»“ káº¿t ná»‘i

![ds18b20-pinout](https://cdn.chipstack.vn/zerobase2/ds18b20/pinout-ds18b20.jpg)

![ds18b20-pins](https://cdn.chipstack.vn/zerobase2/ds18b20/ds18b20-pins.png)

Cáº£m biáº¿n DS18B20 cÃ³ 3 chÃ¢n: VCC, GND vÃ  DQ.

Sá»­ dá»¥ng chÃ¢n D2 cá»§a Zerobase 2 Ä‘á»ƒ káº¿t ná»‘i vá»›i chÃ¢n DQ cá»§a cáº£m biáº¿n, chÃ¢n VCC cá»§a cáº£m biáº¿n káº¿t ná»‘i vá»›i chÃ¢n 3.3V cá»§a Zerobase 2, chÃ¢n GND cá»§a cáº£m biáº¿n káº¿t ná»‘i vá»›i chÃ¢n GND cá»§a Zerobase 2. Äiá»‡n trá»Ÿ 4.7k Ä‘Æ°á»£c káº¿t ná»‘i giá»¯a chÃ¢n DQ vÃ  chÃ¢n VCC cá»§a cáº£m biáº¿n Ä‘á»ƒ táº¡o thÃ nh máº¡ch pull-up.

Sá»­ dá»¥ng chÃ¢n 5V cáº¥p nguá»“n cho LCD, chÃ¢n GND ná»‘i vá»›i GND cá»§a board Zerobase 2. ChÃ¢n SDA vÃ  SCL cá»§a LCD Ä‘Æ°á»£c káº¿t ná»‘i vá»›i chÃ¢n SDA (D18) vÃ  SCL (D19) cá»§a board Zerobase 2.

![ds18b20-schemtatic](https://cdn.chipstack.vn/zerobase2/ds18b20/ds18b20-schemtatic.png)

![ds18b20-circuit](https://cdn.chipstack.vn/zerobase2/ds18b20/ds18b20-circuit.jpg)

## Code

```cpp
// ThÆ° viá»‡n giao tiáº¿p OneWire (cho cáº£m biáº¿n DS18B20)
#include <OneWire.h>

// ThÆ° viá»‡n Ä‘á»ƒ Ä‘á»c nhiá»‡t Ä‘á»™ tá»« cáº£m biáº¿n Dallas nhÆ° DS18B20
#include <DallasTemperature.h>

// ThÆ° viá»‡n Ä‘iá»u khiá»ƒn mÃ n hÃ¬nh LCD thÃ´ng qua giao tiáº¿p I2C
#include <LiquidCrystal_I2C.h>

// ChÃ¢n dá»¯ liá»‡u káº¿t ná»‘i vá»›i cáº£m biáº¿n nhiá»‡t Ä‘á»™ DS18B20
#define ONE_WIRE_BUS 2

// Táº¡o Ä‘á»‘i tÆ°á»£ng oneWire Ä‘á»ƒ giao tiáº¿p vá»›i cÃ¡c thiáº¿t bá»‹ OneWire
OneWire oneWire(ONE_WIRE_BUS);

// Táº¡o Ä‘á»‘i tÆ°á»£ng cáº£m biáº¿n DallasTemperature, sá»­ dá»¥ng oneWire Ä‘á»ƒ giao tiáº¿p
DallasTemperature sensors(&oneWire);

// Táº¡o Ä‘á»‘i tÆ°á»£ng LCD I2C, vá»›i Ä‘á»‹a chá»‰ I2C lÃ  0x27, mÃ n hÃ¬nh 16 cá»™t vÃ  2 hÃ ng
LiquidCrystal_I2C lcd(0x27, 16, 2);

void setup() {
  lcd.init();       // Khá»Ÿi táº¡o LCD
  lcd.backlight();  // Báº­t Ä‘Ã¨n ná»n LCD
  sensors.begin();  // Khá»Ÿi Ä‘á»™ng thÆ° viá»‡n cáº£m biáº¿n nhiá»‡t Ä‘á»™

  lcd.clear();               // XÃ³a mÃ n hÃ¬nh LCD
  lcd.setCursor(3, 0);       // Di chuyá»ƒn con trá» Ä‘áº¿n cá»™t 3, dÃ²ng 0
  lcd.print("Zerobase 2");   // In dÃ²ng chá»¯ "Zerobase 2"
  lcd.setCursor(3, 1);       // Di chuyá»ƒn con trá» Ä‘áº¿n cá»™t 3, dÃ²ng 1
  lcd.print("Starting...");  // In dÃ²ng chá»¯ "Starting..."
  delay(2000);               // Äá»£i 2 giÃ¢y
  lcd.clear();               // XÃ³a LCD trÆ°á»›c khi vÃ o vÃ²ng láº·p chÃ­nh
}

void loop() {
  sensors.requestTemperatures();             // Gá»­i lá»‡nh yÃªu cáº§u Ä‘o nhiá»‡t Ä‘á»™
  float tempC = sensors.getTempCByIndex(0);  // Äá»c nhiá»‡t Ä‘á»™ tá»« cáº£m biáº¿n sá»‘ 0 (chá»‰ dÃ¹ng 1 cáº£m biáº¿n)

  lcd.setCursor(0, 0);           // Di chuyá»ƒn con trá» Ä‘áº¿n Ä‘áº§u dÃ²ng 0
  lcd.print("ZB Temperatures");  // In tiÃªu Ä‘á»

  lcd.setCursor(1, 1);  // Di chuyá»ƒn con trá» Ä‘áº¿n cá»™t 1, dÃ²ng 1
  lcd.print("Temp: ");  // In nhÃ£n "Temp: "
  lcd.print(tempC);     // In giÃ¡ trá»‹ nhiá»‡t Ä‘á»™ (float)
  lcd.print(" C");      // In Ä‘Æ¡n vá»‹ nhiá»‡t Ä‘á»™

  lcd.print("                     ");  // In khoáº£ng tráº¯ng Ä‘á»ƒ xÃ³a dá»¯ liá»‡u dÆ° náº¿u cÃ³
}
```

Copy Ä‘oáº¡n code trÃªn vÃ  dÃ¡n vÃ o Arduino IDE, káº¿t quáº£ sáº½ Ä‘Æ°á»£c nhÆ° hÃ¬nh bÃªn dÆ°á»›i.

![ds18b20-code](https://cdn.chipstack.vn/zerobase2/ds18b20/ds18b20-code.png)

### BiÃªn dá»‹ch

Nháº¥n vÃ o biá»ƒu tÆ°á»£ng Verify Ä‘á»ƒ biÃªn dá»‹ch code.

![verify-code](https://cdn.chipstack.vn/default/verify-code.png "verify-code]")

### Thá»±c hiá»‡n náº¡p code
Cuá»‘i cÃ¹ng báº¡n thá»±c hiá»‡n náº¡p code vÃ o board Zerobase 2. Náº¿u chÆ°a biáº¿t cÃ¡ch náº¡p code cho Zerobase 2, báº¡n cÃ³ thá»ƒ tham kháº£o [táº¡i Ä‘Ã¢y](https://zerobase.chipstack.vn/#/vi/zerobase-2/quickstart).

### Giáº£i thÃ­ch code

Khai bÃ¡o cÃ¡c thÆ° viá»‡n cáº§n thiáº¿t cho viá»‡c giao tiáº¿p vá»›i cáº£m biáº¿n DS18B20, LCD I2C, vÃ  chÃ¢n D2 sá»­ dá»¥ng trong ONEWIRE. Sau Ä‘Ã³, khá»Ÿi táº¡o cÃ¡c Ä‘á»‘i tÆ°á»£ng Ä‘á»ƒ giao tiáº¿p vá»›i cáº£m biáº¿n vÃ  LCD.

```cpp
// ThÆ° viá»‡n giao tiáº¿p OneWire (cho cáº£m biáº¿n DS18B20)
#include <OneWire.h>

// ThÆ° viá»‡n Ä‘á»ƒ Ä‘á»c nhiá»‡t Ä‘á»™ tá»« cáº£m biáº¿n Dallas nhÆ° DS18B20
#include <DallasTemperature.h>

// ThÆ° viá»‡n Ä‘iá»u khiá»ƒn mÃ n hÃ¬nh LCD thÃ´ng qua giao tiáº¿p I2C
#include <LiquidCrystal_I2C.h>

// ChÃ¢n dá»¯ liá»‡u káº¿t ná»‘i vá»›i cáº£m biáº¿n nhiá»‡t Ä‘á»™ DS18B20
#define ONE_WIRE_BUS 2

// Táº¡o Ä‘á»‘i tÆ°á»£ng oneWire Ä‘á»ƒ giao tiáº¿p vá»›i cÃ¡c thiáº¿t bá»‹ OneWire
OneWire oneWire(ONE_WIRE_BUS);

// Táº¡o Ä‘á»‘i tÆ°á»£ng cáº£m biáº¿n DallasTemperature, sá»­ dá»¥ng oneWire Ä‘á»ƒ giao tiáº¿p
DallasTemperature sensors(&oneWire);

// Táº¡o Ä‘á»‘i tÆ°á»£ng LCD I2C, vá»›i Ä‘á»‹a chá»‰ I2C lÃ  0x27, mÃ n hÃ¬nh 16 cá»™t vÃ  2 hÃ ng
LiquidCrystal_I2C lcd(0x27, 16, 2);
```

Trong hÃ m `setup()`, khá»Ÿi táº¡o LCD vÃ  cáº£m biáº¿n, sau Ä‘Ã³ hiá»ƒn thá»‹ thÃ´ng bÃ¡o "Zerobase 2" vÃ  "Starting..." trÃªn LCD trong 2 giÃ¢y.

```cpp
void setup() {
  lcd.init();       // Khá»Ÿi táº¡o LCD
  lcd.backlight();  // Báº­t Ä‘Ã¨n ná»n LCD
  sensors.begin();  // Khá»Ÿi Ä‘á»™ng thÆ° viá»‡n cáº£m biáº¿n nhiá»‡t Ä‘á»™

  lcd.clear();               // XÃ³a mÃ n hÃ¬nh LCD
  lcd.setCursor(3, 0);       // Di chuyá»ƒn con trá» Ä‘áº¿n cá»™t 3, dÃ²ng 0
  lcd.print("Zerobase 2");   // In dÃ²ng chá»¯ "Zerobase 2"
  lcd.setCursor(3, 1);       // Di chuyá»ƒn con trá» Ä‘áº¿n cá»™t 3, dÃ²ng 1
  lcd.print("Starting...");  // In dÃ²ng chá»¯ "Starting..."
  delay(2000);               // Äá»£i 2 giÃ¢y
  lcd.clear();               // XÃ³a LCD trÆ°á»›c khi vÃ o vÃ²ng láº·p chÃ­nh
}
```

Trong hÃ m `loop()`, gá»­i lá»‡nh yÃªu cáº§u Ä‘o nhiá»‡t Ä‘á»™ Ä‘áº¿n cáº£m biáº¿n
```cpp
  sensors.requestTemperatures();             // Gá»­i lá»‡nh yÃªu cáº§u Ä‘o nhiá»‡t Ä‘á»™
```

Sau Ä‘Ã³ Ä‘á»c nhiá»‡t Ä‘á»™ tá»« cáº£m biáº¿n, báº¡n truyá»n vÃ o chá»‰ sá»‘ 0 vÃ¬ chá»‰ cÃ³ 1 cáº£m biáº¿n Ä‘Æ°á»£c káº¿t ná»‘i, cÃ²n náº¿u cÃ³ nhiá»u cáº£m biáº¿n thÃ¬ báº¡n cÃ³ thá»ƒ thay Ä‘á»•i chá»‰ sá»‘ nÃ y Ä‘á»ƒ Ä‘á»c nhiá»‡t Ä‘á»™ tá»« cáº£m biáº¿n khÃ¡c.

```cpp
  float tempC = sensors.getTempCByIndex(0);  // Äá»c nhiá»‡t Ä‘á»™ tá»« cáº£m biáº¿n sá»‘ 0 (chá»‰ dÃ¹ng 1 cáº£m biáº¿n)
```

Cuá»‘i cÃ¹ng, hiá»ƒn thá»‹ nhiá»‡t Ä‘á»™ lÃªn LCD vá»›i Ä‘á»‹nh dáº¡ng "Temp: XX.X C".
```cpp
  lcd.setCursor(0, 0);           // Di chuyá»ƒn con trá» Ä‘áº¿n Ä‘áº§u dÃ²ng 0
  lcd.print("ZB Temperatures");  // In tiÃªu Ä‘á»

  lcd.setCursor(1, 1);  // Di chuyá»ƒn con trá» Ä‘áº¿n cá»™t 1, dÃ²ng 1
  lcd.print("Temp: ");  // In nhÃ£n "Temp: "
  lcd.print(tempC);     // In giÃ¡ trá»‹ nhiá»‡t Ä‘á»™ (float)
  lcd.print(" C");      // In Ä‘Æ¡n vá»‹ nhiá»‡t Ä‘á»™

  lcd.print("                     ");  // In khoáº£ng tráº¯ng Ä‘á»ƒ xÃ³a dá»¯ liá»‡u dÆ° náº¿u cÃ³
}
```

## Káº¿t quáº£

?> Nhiá»‡t Ä‘á»™ Ä‘Æ°á»£c hiá»ƒn thá»‹ trÃªn LCD vá»›i Ä‘á»‹nh dáº¡ng "Temp: XX.X C". Báº¡n cÃ³ thá»ƒ thay Ä‘á»•i Ä‘á»™ phÃ¢n giáº£i cá»§a cáº£m biáº¿n DS18B20 báº±ng cÃ¡ch thay Ä‘á»•i tham sá»‘ trong hÃ m `setResolution()` cá»§a thÆ° viá»‡n DallasTemperature. Tham sá»‘ nÃ y cÃ³ thá»ƒ lÃ  9, 10, 11 hoáº·c 12, tÆ°Æ¡ng á»©ng vá»›i Ä‘á»™ phÃ¢n giáº£i 0.5Â°C, 0.25Â°C, 0.125Â°C vÃ  0.0625Â°C.

<div align="center">
    <img src="https://cdn.chipstack.vn/zerobase2/ds18b20/ds18b20-result.gif" alt="ds18b20-result"/>
    <p><em>Káº¿t quáº£ hiá»ƒn thá»‹ trÃªn LCD 16x2</em></p>
</div>

## Káº¿t luáº­n vÃ  hÆ°á»›ng phÃ¡t triá»ƒn

BÃ i viáº¿t nÃ y Ä‘Ã£ hÆ°á»›ng dáº«n báº¡n cÃ¡ch sá»­ dá»¥ng cáº£m biáº¿n nhiá»‡t Ä‘á»™ DS18B20 vá»›i Zerobase 2. Báº¡n cÃ³ thá»ƒ má»Ÿ rá»™ng dá»± Ã¡n nÃ y báº±ng cÃ¡ch thÃªm nhiá»u cáº£m biáº¿n DS18B20 vÃ o máº¡ch vÃ  hiá»ƒn thá»‹ nhiá»‡t Ä‘á»™ cá»§a tá»«ng cáº£m biáº¿n trÃªn LCD.

Äá»ƒ phÃ¡t triá»ƒn thÃªm tá»« bÃ i há»c nÃ y, báº¡n cÃ³ thá»ƒ thá»­ cÃ¡c Ã½ tÆ°á»Ÿng sau:

- ThÃªm nhiá»u cáº£m biáº¿n DS18B20 vÃ o máº¡ch vÃ  hiá»ƒn thá»‹ nhiá»‡t Ä‘á»™ cá»§a tá»«ng cáº£m biáº¿n trÃªn LCD.
- Káº¿t ná»‘i cáº£m biáº¿n vá»›i má»™t module Wi-Fi Ä‘á»ƒ gá»­i dá»¯ liá»‡u nhiá»‡t Ä‘á»™ lÃªn Internet.
- Sá»­ dá»¥ng cáº£m biáº¿n DS18B20 Ä‘á»ƒ Ä‘iá»u khiá»ƒn má»™t thiáº¿t bá»‹ khÃ¡c, cháº³ng háº¡n nhÆ° quáº¡t, dá»±a trÃªn nhiá»‡t Ä‘á»™ Ä‘o Ä‘Æ°á»£c.

**ChÃºc báº¡n thÃ nh cÃ´ng!**

[ğŸ  TRá» Vá»€ TRANG Tá»”NG Há»¢P CÃC VÃ Dá»¤](vi/zerobase-2/examples.md)




